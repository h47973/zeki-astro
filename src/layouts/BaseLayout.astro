---
import '../styles/global.css';

export interface Props {
  title: string
  description?: string
  keywords?: string
  ogImage?: string
  canonicalURL?: string
  structuredData?: object
}

const {
  title,
  description = "Zeki Experts is a Software Development Company offering best IT Solutions in USA. Hire best App, Database and Web Developers.",
  keywords = "IT solutions, software development, web development, mobile app development, database development, React, Node.js, Laravel, PHP, JavaScript",
  ogImage = "/og-image.jpg",
  canonicalURL = new URL(Astro.url.pathname, Astro.site).toString(),
  structuredData
} = Astro.props

const fullTitle = title === "Home" ? "IT Solutions in USA - Zeki Experts" : `${title} - Zeki Experts`
---

<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Meta Tags -->
  <meta charset="UTF-8" />
  <meta name="description" content={description} />
  <meta name="keywords" content={keywords} />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="generator" content={Astro.generator} />
  <meta name="author" content="Zeki Experts" />
  <meta name="robots" content="index, follow" />
  
  <!-- Canonical URL -->
  <link rel="canonical" href={canonicalURL} />
  
  <!-- Title -->
  <title>{fullTitle}</title>
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website" />
  <meta property="og:url" content={canonicalURL} />
  <meta property="og:title" content={fullTitle} />
  <meta property="og:description" content={description} />
  <meta property="og:image" content={new URL(ogImage, Astro.url)} />
  <meta property="og:site_name" content="Zeki Experts" />
  <meta property="og:locale" content="en_US" />
  
  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image" />
  <meta property="twitter:url" content={canonicalURL} />
  <meta property="twitter:title" content={fullTitle} />
  <meta property="twitter:description" content={description} />
  <meta property="twitter:image" content={new URL(ogImage, Astro.url)} />
  <meta property="twitter:site" content="@ExpertZeki" />
  
  <!-- Favicons -->
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <link rel="icon" type="image/png" href="/favicon.png" />
  <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
  <link rel="manifest" href="/manifest.json" />
  
  <!-- Theme -->
  <meta name="theme-color" content="#0ea5e9" />
  <meta name="msapplication-TileColor" content="#0ea5e9" />
  
  <!-- Preload critical resources -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  
  <!-- DNS Prefetch -->
  <link rel="dns-prefetch" href="//www.google-analytics.com" />
  
  <!-- Structured Data -->
  {structuredData && (
    <script type="application/ld+json" set:html={JSON.stringify(structuredData)} />
  )}
  
  <!-- Default Structured Data -->
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "Zeki Experts",
      "alternateName": ["Zeki", "ZekiExperts", "Zeki Expert Solutions"],
      "url": "https://zekiexperts.com",
      "logo": "https://zekiexperts.com/logo.svg",
      "description": "Leading software development company offering IT solutions, web development, mobile app development, and database solutions.",
      "contactPoint": [
        {
          "@type": "ContactPoint",
          "telephone": "+1-202-992-5235",
          "contactType": "customer service",
          "areaServed": "US"
        },
        {
          "@type": "ContactPoint",
          "telephone": "+92-331-111-0214", 
          "contactType": "customer service",
          "areaServed": "PK"
        }
      ],
      "address": [
        {
          "@type": "PostalAddress",
          "streetAddress": "1049 El Monte Avenue Ste C #684",
          "addressLocality": "Mountain View",
          "addressRegion": "CA",
          "postalCode": "94040",
          "addressCountry": "US"
        },
        {
          "@type": "PostalAddress",
          "streetAddress": "Kickstart Building, 189 Korang Road, I-10/3",
          "addressLocality": "Islamabad",
          "addressCountry": "PK"
        },
        {
          "@type": "PostalAddress",
          "streetAddress": "20-22 Wenlock Road",
          "addressLocality": "London",
          "postalCode": "N1 7GU",
          "addressCountry": "GB"
        }
      ],
      "sameAs": [
        "https://www.facebook.com/zekiexperts/",
        "https://twitter.com/ExpertZeki",
        "https://www.linkedin.com/company/zekiexperts"
      ],
      "foundingDate": "2020",
      "numberOfEmployees": "50-100",
      "knowsAbout": [
        "Software Development",
        "Web Development", 
        "Mobile App Development",
        "Database Development",
        "IT Consulting",
        "React Development",
        "Node.js Development",
        "Laravel Development",
        "PHP Development"
      ]
    }
  </script>
  
  <!-- Google Analytics (replace with your ID) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-N6Y0B7Z4P6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-N6Y0B7Z4P6');
  </script>
  
  <!-- Icon fonts -->
  <link href="https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/@flaticon/flaticon-uicons/css/all/all.css" rel="stylesheet" />
  </head>
  
</head>

<body class="min-h-screen bg-white dark:bg-neutral-950 transition-colors duration-300 overflow-x-hidden">
  <!-- Skip to main content (accessibility) -->
  <a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 z-50 btn-primary btn-sm">
    Skip to main content
  </a>
  
  <!-- Navigation -->
  <header id="header" class="fixed top-0 w-full z-50 bg-white/80 dark:bg-gray-900/80 backdrop-blur-lg transition-all duration-300">
    <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between h-16 lg:h-20">
        <!-- Logo -->
        <div class="flex-shrink-0">
          <a href="/" class="flex items-center space-x-2 font-bold text-xl text-neutral-900 dark:text-white">
            <div class="w-8 h-8 bg-gradient-to-br from-primary-600 to-accent-600 rounded-lg flex items-center justify-center">
              <span class="text-white font-bold text-sm">Z</span>
            </div>
            <span>Zeki Experts</span>
          </a>
        </div>
        
        <!-- Desktop Navigation -->
        <div class="hidden lg:flex items-center space-x-8">
          <a href="/" class="nav-link">Home</a>
          <div class="relative group">
            <button class="nav-link flex items-center">
              Services
              <svg class="w-4 h-4 ml-1 transition-transform group-hover:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
              </svg>
            </button>
            <div class="absolute top-full left-0 mt-2 w-64 glass rounded-xl shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 transform translate-y-2 group-hover:translate-y-0">
              <div class="p-2">
                <a href="/services/web-development" class="block px-3 py-2 text-sm text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-lg">Web Development</a>
                <a href="/services/mobile-development" class="block px-3 py-2 text-sm text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-lg">Mobile Development</a>
                <a href="/services/database-solutions" class="block px-3 py-2 text-sm text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-lg">Database Solutions</a>
                <a href="/services/it-consulting" class="block px-3 py-2 text-sm text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-lg">IT Consulting</a>
              </div>
            </div>
          </div>
          <a href="/portfolio" class="nav-link">Portfolio</a>
          <a href="/about" class="nav-link">About</a>
          <a href="/blog" class="nav-link">Blog</a>
          <a href="/contact" class="nav-link">Contact</a>
        </div>
        
        <!-- CTA & Theme Toggle -->
        <div class="flex items-center space-x-4">
          <button id="theme-toggle" class="p-2 rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors" aria-label="Toggle dark mode">
            <svg id="theme-toggle-dark-icon" class="hidden w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
            </svg>
            <svg id="theme-toggle-light-icon" class="hidden w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
            </svg>
          </button>
          <a href="/contact" class="hidden sm:inline-flex btn-primary btn-md">
            Get Started
          </a>
          
          <!-- Mobile menu button -->
          <button id="mobile-menu-toggle" class="lg:hidden p-2 rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors" aria-label="Toggle mobile menu">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
            </svg>
          </button>
        </div>
      </div>
    </nav>
    
    <!-- Mobile Menu -->
    <div id="mobile-menu" class="lg:hidden fixed inset-x-0 top-16 bg-white dark:bg-neutral-950 border-t border-neutral-200 dark:border-neutral-800 opacity-0 invisible transition-all duration-300 transform -translate-y-2">
      <div class="container mx-auto px-4 py-6">
        <div class="space-y-4">
          <a href="/" class="block py-2 text-neutral-700 dark:text-neutral-300 hover:text-primary-600 dark:hover:text-primary-400">Home</a>
          <a href="/services" class="block py-2 text-neutral-700 dark:text-neutral-300 hover:text-primary-600 dark:hover:text-primary-400">Services</a>
          <a href="/portfolio" class="block py-2 text-neutral-700 dark:text-neutral-300 hover:text-primary-600 dark:hover:text-primary-400">Portfolio</a>
          <a href="/about" class="block py-2 text-neutral-700 dark:text-neutral-300 hover:text-primary-600 dark:hover:text-primary-400">About</a>
          <a href="/blog" class="block py-2 text-neutral-700 dark:text-neutral-300 hover:text-primary-600 dark:hover:text-primary-400">Blog</a>
          <a href="/contact" class="block py-2 text-neutral-700 dark:text-neutral-300 hover:text-primary-600 dark:hover:text-primary-400">Contact</a>
          <div class="pt-4 border-t border-neutral-200 dark:border-neutral-800">
            <a href="/contact" class="btn-primary btn-md w-full">Get Started</a>
          </div>
        </div>
      </div>
    </div>
  </header>
  
  <!-- Main Content -->
  <main id="main-content">
    <slot />
  </main>
  
  <!-- Footer -->
  <footer class="bg-neutral-950 text-neutral-300 mt-auto">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-12 lg:py-16">
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
        <!-- Company Info -->
        <div class="space-y-4">
          <div class="flex items-center space-x-2">
            <div class="w-8 h-8 bg-gradient-to-br from-primary-600 to-accent-600 rounded-lg flex items-center justify-center">
              <span class="text-white font-bold text-sm">Z</span>
            </div>
            <span class="font-bold text-xl text-white">Zeki Experts</span>
          </div>
          <p class="text-sm leading-relaxed">
            Leading software development company delivering innovative IT solutions worldwide.
          </p>
          <div class="flex space-x-4">
            <a href="https://www.facebook.com/zekiexperts/" target="_blank" rel="noopener noreferrer" class="p-2 hover:bg-neutral-800 rounded-lg transition-colors" aria-label="Facebook">
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
              </svg>
            </a>
            <a href="https://twitter.com/ExpertZeki" target="_blank" rel="noopener noreferrer" class="p-2 hover:bg-neutral-800 rounded-lg transition-colors" aria-label="Twitter">
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
              </svg>
            </a>
            <a href="https://www.linkedin.com/company/zekiexperts" target="_blank" rel="noopener noreferrer" class="p-2 hover:bg-neutral-800 rounded-lg transition-colors" aria-label="LinkedIn">
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 01-2.063-2.065 2.064 2.064 0 112.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
              </svg>
            </a>
          </div>
        </div>
        
        <!-- Services -->
        <div class="space-y-4">
          <h3 class="font-semibold text-white">Services</h3>
          <ul class="space-y-2 text-sm">
            <li><a href="/services/web-development" class="hover:text-primary-400 transition-colors">Web Development</a></li>
            <li><a href="/services/mobile-development" class="hover:text-primary-400 transition-colors">Mobile Development</a></li>
            <li><a href="/services/database-solutions" class="hover:text-primary-400 transition-colors">Database Solutions</a></li>
            <li><a href="/services/it-consulting" class="hover:text-primary-400 transition-colors">IT Consulting</a></li>
          </ul>
        </div>
        
        <!-- Company -->
        <div class="space-y-4">
          <h3 class="font-semibold text-white">Company</h3>
          <ul class="space-y-2 text-sm">
            <li><a href="/about" class="hover:text-primary-400 transition-colors">About Us</a></li>
            <li><a href="/portfolio" class="hover:text-primary-400 transition-colors">Portfolio</a></li>
            <li><a href="/careers" class="hover:text-primary-400 transition-colors">Careers</a></li>
            <li><a href="/blog" class="hover:text-primary-400 transition-colors">Blog</a></li>
          </ul>
        </div>
        
        <!-- Contact -->
        <div class="space-y-4">
          <h3 class="font-semibold text-white">Contact</h3>
          <ul class="space-y-2 text-sm">
            <li>
              <a href="tel:+12029925235" class="hover:text-primary-400 transition-colors">
                +1 (202) 992-5235 (USA)
              </a>
            </li>
            <li>
              <a href="tel:+923311110214" class="hover:text-primary-400 transition-colors">
                +92 331 111 0214 (Pakistan)
              </a>
            </li>
            <li>
              <a href="mailto:info@zekiexperts.com" class="hover:text-primary-400 transition-colors">
                info@zekiexperts.com
              </a>
            </li>
            <li>
              <a href="mailto:information@zekiexperts.com" class="hover:text-primary-400 transition-colors">
                information@zekiexperts.com
              </a>
            </li>
            <li class="pt-2">
              <a href="/contact" class="btn-primary btn-sm">Get in Touch</a>
            </li>
          </ul>
        </div>
      </div>
      
      <div class="border-t border-neutral-800 mt-12 pt-8 text-center text-sm">
        <p>&copy; {new Date().getFullYear()} Zeki Experts. All rights reserved.</p>
      </div>
    </div>
  </footer>
  
  <!-- Scripts -->
  <script>
    // Initialize Lenis smooth scrolling
    document.addEventListener('DOMContentLoaded', function() {
      // Import and initialize Lenis
      import('lenis').then(({ default: Lenis }) => {
        const lenis = new Lenis({
          duration: 1.2,
          easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),
          smoothWheel: true,
          touchMultiplier: 2,
        });

        function raf(time) {
          lenis.raf(time);
          requestAnimationFrame(raf);
        }
        requestAnimationFrame(raf);
      }).catch(console.error);
      
      // Add smooth page transitions for navigation links
      document.querySelectorAll('a[href^="/"]').forEach(link => {
        link.addEventListener('click', function(e) {
          const href = this.getAttribute('href');
          
          // Don't apply transition for hash links or external links
          if (href.startsWith('#') || href.includes('mailto:') || href.includes('tel:')) {
            return;
          }
          
          e.preventDefault();
          
          // Fade out current page
          document.body.style.transition = 'opacity 0.3s ease-out';
          document.body.style.opacity = '0.7';
          
          // Navigate after fade
          setTimeout(() => {
            window.location.href = href;
          }, 300);
        });
      });
    });
    
    // Theme toggle functionality - Fixed
    function initializeTheme() {
      const themeToggle = document.getElementById('theme-toggle');
      const darkIcon = document.getElementById('theme-toggle-dark-icon');
      const lightIcon = document.getElementById('theme-toggle-light-icon');
      
      if (!themeToggle || !darkIcon || !lightIcon) return;
      
      // Check for saved theme preference or default to system preference
      const savedTheme = localStorage.getItem('theme');
      const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      const currentTheme = savedTheme || (systemPrefersDark ? 'dark' : 'light');
      
      function updateTheme(theme) {
        if (theme === 'dark') {
          document.documentElement.classList.add('dark');
          darkIcon.classList.add('hidden');
          lightIcon.classList.remove('hidden');
        } else {
          document.documentElement.classList.remove('dark');
          darkIcon.classList.remove('hidden');
          lightIcon.classList.add('hidden');
        }
        localStorage.setItem('theme', theme);
      }
      
      // Set initial theme
      updateTheme(currentTheme);
      
      // Toggle theme on click
      themeToggle.addEventListener('click', function() {
        const isDark = document.documentElement.classList.contains('dark');
        updateTheme(isDark ? 'light' : 'dark');
      });
      
      // Listen for system theme changes
      window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', function(e) {
        if (!localStorage.getItem('theme')) {
          updateTheme(e.matches ? 'dark' : 'light');
        }
      });
    }
    
    // Initialize theme immediately
    initializeTheme();
    
    // Mobile menu functionality
    const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
    const mobileMenu = document.getElementById('mobile-menu');
    
    mobileMenuToggle?.addEventListener('click', function() {
      if (mobileMenu?.classList.contains('opacity-0')) {
        mobileMenu.classList.remove('opacity-0', 'invisible', '-translate-y-2');
        mobileMenu.classList.add('opacity-100', 'visible', 'translate-y-0');
      } else {
        mobileMenu?.classList.add('opacity-0', 'invisible', '-translate-y-2');
        mobileMenu?.classList.remove('opacity-100', 'visible', 'translate-y-0');
      }
    });
    
    // Header scroll effect - Improved
    let lastScrollTop = 0;
    let ticking = false;
    const header = document.getElementById('header');
    
    function updateHeader() {
      const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
      
      if (scrollTop > 50) {
        header?.classList.add('border-b', 'border-gray-200', 'dark:border-gray-700');
        header?.classList.remove('bg-white/80', 'dark:bg-gray-900/80');
        header?.classList.add('bg-white/95', 'dark:bg-gray-900/95');
        
        // Only hide header when scrolling down fast and past the fold
        if (scrollTop > 200 && scrollTop > lastScrollTop + 5) {
          header?.classList.add('-translate-y-full');
        } else if (scrollTop < lastScrollTop - 5) {
          header?.classList.remove('-translate-y-full');
        }
      } else {
        header?.classList.remove('border-b', 'border-gray-200', 'dark:border-gray-700');
        header?.classList.remove('bg-white/95', 'dark:bg-gray-900/95');
        header?.classList.add('bg-white/80', 'dark:bg-gray-900/80');
        header?.classList.remove('-translate-y-full');
      }
      
      lastScrollTop = scrollTop;
      ticking = false;
    }
    
    window.addEventListener('scroll', function() {
      if (!ticking) {
        requestAnimationFrame(updateHeader);
        ticking = true;
      }
    });
    
    // Smooth scroll handled by Lenis; native anchor smooth scrolling removed for consistency
  </script>
</body>
</html>